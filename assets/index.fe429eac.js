import{S as x,i as B,s as S,e as m,t as U,a as _,b as n,c as g,d as L,f as C,g as d,h as R,l as y,j as q,n as v,k as E,r as j,m as z}from"./index.4e24852a.js";import"./modulepreload-polyfill.c7c6310f.js";function A(e){let s,t,a,p,o,r,b,c,w,l,i,h,k;return{c(){s=m("div"),t=m("div"),a=m("span"),p=U(e[2]),o=_(),r=m("input"),b=_(),c=m("button"),c.textContent="GO",w=_(),l=m("iframe"),n(a,"class","netless-app-browser-status"),g(a,"loading",e[2]==="Loading"),g(a,"ready",e[2]==="Ready"),n(r,"class","netless-app-browser-url"),n(r,"autocomplete","off"),n(r,"spellcheck","false"),n(c,"class","netless-app-browser-go"),n(t,"class","netless-app-browser-omnibox"),n(l,"title","Netless App Browser"),n(l,"class","netless-app-browser-content"),n(l,"frameborder","0"),L(l.src,i=e[0])||n(l,"src",i),n(s,"class","netless-app-browser"),n(s,"data-kind","browser")},m(u,f){C(u,s,f),d(s,t),d(t,a),d(a,p),d(t,o),d(t,r),R(r,e[1]),d(t,b),d(t,c),d(s,w),d(s,l),h||(k=[y(r,"input",e[5]),y(r,"keypress",e[6]),y(c,"click",e[4]),y(l,"load",e[3])],h=!0)},p(u,[f]){f&4&&q(p,u[2]),f&4&&g(a,"loading",u[2]==="Loading"),f&4&&g(a,"ready",u[2]==="Ready"),f&2&&r.value!==u[1]&&R(r,u[1]),f&1&&!L(l.src,i=u[0])&&n(l,"src",i)},i:v,o:v,d(u){u&&E(s),h=!1,j(k)}}}function D(e,s,t){const a=z();let{url:p="about:blank"}=s,{dummyURL:o=p}=s,r="Ready";function b(){t(2,r="Ready")}function c(){t(0,p=o),t(2,r="Loading")}function w(){o=this.value,t(1,o)}const l=i=>i.key==="Enter"&&c();return e.$$set=i=>{"url"in i&&t(0,p=i.url),"dummyURL"in i&&t(1,o=i.dummyURL)},e.$$.update=()=>{e.$$.dirty&1&&a("update",p)},[p,o,r,b,c,w,l]}class G extends x{constructor(s){super(),B(this,s,D,A,S,{url:0,dummyURL:1})}}const N=`.netless-app-browser{width:100%;height:100%;display:flex;flex-flow:column nowrap}.telebox-color-scheme-dark .netless-app-browser{color-scheme:dark}.netless-app-browser-omnibox{padding:2px 4px;display:flex;align-items:center;gap:4px}.netless-app-browser-status{width:5em;font-size:x-small;text-align:center}.netless-app-browser-status.loading{color:gray}.netless-app-browser-status.ready{color:green}.netless-app-browser-url{flex-grow:1}.netless-app-browser-go{padding:1px 12px}.netless-app-browser-content{display:block;flex-grow:1}
`,H={kind:"Browser",setup(e){const s=e.createStorage("browser",e.attributes),t=e.box;t.mountStyles(N);const a=new G({target:t.$content,props:{url:s.state.url||"about:blank"}});a.$on("update",({detail:o})=>{s.setState({url:o})});const p=s.on("stateChanged",()=>{const{url:o}=s.state;a.$set({url:o,dummyURL:o})});e.emitter.on("destroy",()=>{console.log("[Browser]: destroy"),p(),a.$destroy()})}};export{H as default};
