const d="!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=d.length,n=Array(20),c=()=>{for(let r=0;r<20;r++)n[r]=d.charAt(Math.random()*a);return n.join("")};function h(r){try{return r()}catch(e){console.error(e)}}class l{constructor(){this.disposers=new Map}addDisposer(e,s=this.genUID()){return this.flush(s),this.disposers.set(s,Array.isArray(e)?()=>e.forEach(h):e),s}add(e,s=this.genUID()){const t=e();return t?this.addDisposer(t,s):s}addEventListener(e,s,t,i,o=this.genUID()){return e.addEventListener(s,t,i),this.addDisposer(()=>e.removeEventListener(s,t,i),o),o}setTimeout(e,s,t=this.genUID()){const i=window.setTimeout(()=>{this.remove(t),e()},s);return this.addDisposer(()=>window.clearTimeout(i),t)}setInterval(e,s,t=this.genUID()){const i=window.setInterval(e,s);return this.addDisposer(()=>window.clearInterval(i),t)}remove(e){const s=this.disposers.get(e);return this.disposers.delete(e),s}flush(e){const s=this.remove(e);if(s)try{s()}catch(t){console.error(t)}}flushAll(){this.disposers.forEach(h),this.disposers.clear()}genUID(){let e;do e=c();while(this.disposers.has(e));return e}}export{c as i,l as n};
