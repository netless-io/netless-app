function y(){}function v(e){return document.createElement(e)}function o(e,t){return e.appendChild(t)}function g(e,t){return e.classList.add(`netless-app-dice-${t}`),e}function u(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function $(e,t,s){s==null?e.removeAttribute(t):e.getAttribute(t)!==s&&e.setAttribute(t,s)}function p(e,t){for(const s in t)$(e,s,t[s])}function _(e){return`rgb(${e[0]}, ${e[1]}, ${e[2]})`}function S(){const e=u("svg");e.style.display="none",p(e,{width:"100",height:"100",viewBox:"0 0 100 100"});for(let t=1;t<=6;t++)o(e,k(t));return e}function k(e){const t=u("symbol");return p(t,{id:`dice-face-${e}`,viewBox:"0 0 100 100"}),(e===1||e===3||e===5)&&o(t,i(50,50)),(e===2||e===3||e===4||e===5||e===6)&&(o(t,i(25,75)),o(t,i(75,25))),(e===4||e===5||e===6)&&(o(t,i(25,25)),o(t,i(75,75))),e===6&&(o(t,i(25,50)),o(t,i(75,50))),t}function i(e,t){const s=u("circle");return p(s,{cx:String(e),cy:String(t),r:"8"}),s}function C(e){const t=g(v("div"),"cube"),s=[];for(let n=1;n<=6;++n){const r=Y(n,e[n-1]);s.push(r),o(t,r)}return{$cube:t,$faces:s}}function Y(e,t){const s=g(g(v("div"),"face"),`face-${e}`),n=u("svg");p(n,{width:"100",height:"100",viewBox:"0 0 100 100",fill:"#fff"});const r=u("use");return p(r,{href:`#dice-face-${t}`}),o(n,r),o(s,n),s}function L(e){const t=g(v("div"),"container"),s=S();o(t,s);const{$cube:n,$faces:r}=C(e);o(t,n);const d="netless-app-dice-reset",a="netless-app-dice-activate";function l(){n.classList.remove(a),n.classList.add(d)}function c(){n.classList.remove(d),n.classList.add(a)}function h(f,b){const x=r[f].querySelector("svg use");$(x,"href",`#dice-face-${b}`)}let m="";function w(f){m!==f&&(m=f,r.forEach(b=>{b.style.backgroundColor=f}))}return{$container:t,$symbols:s,$cube:n,$faces:r,reset:l,activate:c,set_face:h,set_color:w}}const X=`.netless-app-dice-container{width:100%;height:100%;overflow:hidden;display:flex;align-items:center;justify-content:center;perspective:800px;user-select:none;-webkit-user-select:none}.netless-app-dice-cube{display:inline-block;width:100px;height:100px;transform-style:preserve-3d;transform-origin:center;position:relative;cursor:pointer}.netless-app-dice-reset{animation:netless-app-dice-anti-rotate .1s paused}.netless-app-dice-activate{animation:netless-app-dice-rotate 3s running;cursor:not-allowed}.netless-app-dice-face{width:100%;height:100%;border:1px solid;overflow:hidden;position:absolute;transform-origin:0 0;background-color:#68ab5d;transform-style:preserve-3d;backface-visibility:hidden}.netless-app-dice-face-1{transform:translateZ(50px)}.netless-app-dice-face-2{left:100px;transform:translateZ(-50px) rotateY(180deg)}.netless-app-dice-face-3{transform:rotateY(-90deg) translate(-50px)}.netless-app-dice-face-4{left:100px;transform:rotateY(90deg) translate(-50px)}.netless-app-dice-face-5{top:100px;transform:rotateX(-90deg) translateY(-50px)}.netless-app-dice-face-6{transform:rotateX(90deg) translateY(-50px)}@keyframes netless-app-dice-rotate{0%{transform:rotateX(0) rotateY(0) rotate(0)}to{transform:rotateX(1080deg) rotateY(-720deg) rotate(0)}}@keyframes netless-app-dice-anti-rotate{0%{transform:rotateX(1080deg) rotateY(-720deg) rotate(0)}to{transform:rotateX(0) rotateY(0) rotate(0)}}
`,A={kind:"Dice",setup(e){const t=new Set,s=e.createStorage("faces"),n=L(s.state.value||[1,2,3,4,5,6]);n.$cube.onclick=function(){var c;if(n.$cube.classList.contains("netless-app-dice-activate"))return;const l=(c=e.currentMember)==null?void 0:c.memberState.strokeColor;s.setState({value:E([1,2,3,4,5,6]),color:l?_(l):""})};let r=y;function d(){r(),t.delete(r),n.activate(),n.set_color(s.state.color||"");const a=setTimeout(()=>{const c=s.state.value;c&&c.forEach((h,m)=>n.set_face(m,h))},1e3),l=setTimeout(n.reset,3010);r=()=>{clearTimeout(l),clearTimeout(a),n.reset()},t.add(r)}t.add(s.on("stateChanged",d)),e.box.mountStyles(X),e.box.mountContent(n.$container),e.emitter.on("destroy",()=>{t.forEach(a=>a())})}};function E(e){for(let t=e.length-1;t>0;t--){const s=Math.floor(Math.random()*(t+1));[e[t],e[s]]=[e[s],e[t]]}return e}export{A as default};
